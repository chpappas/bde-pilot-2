images = loadMNISTImages('train-images-idx3-ubyte');
autoenc1 = trainAutoencoder(images(:,1:200), 144, 'maxEpochs',100)
feat1 = encode(autoenc1,images);
autoenc2 = trainAutoencoder(feat1,144, 'maxEpochs',100)
qnet = stack(autoenc1,autoenc2.network)
qnet.trainFcn = 'trainbu';
out_none = qnet(images);
qnet = train(qnet,images(:,1:100));
out_100 = qnet(images);
qnet = train(qnet,images(:,101:1000));
out_1000 = qnet(images);
qnet = train(qnet,images(:,1001:10000));
out_10000 = qnet(images);
qnet = train(qnet,images);
out_all = qnet(images);